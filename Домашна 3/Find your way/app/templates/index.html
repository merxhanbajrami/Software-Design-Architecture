<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Find your way</title>

    <!-- leaflet javascript and css files -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
   integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
   crossorigin=""/>

   <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>
    <style>

        body{
            margin-top: 20px;
            margin-left: 20px;
            margin-right: 20px;
            margin-bottom: 20px;
        }
        h1 {
            font-size: 40px;
            color: grey;
            text-shadow: 3px 3px 6px navajowhite;
            text-align: left;
            font-family: cursive;
        }
        #vlez{
            font-family: cursive;
            color: rgba(87, 87, 87, 0.62);
        }
        #search {
            text-shadow: 3px 3px 6px navajowhite;
        }
        section{
            float: left;
            margin: 0 1.5%;
            width: 21%;
        }
        aside{
            float:right;
            margin: 0 1.5%;
            width: 55%;
        }
        .column {
            float: left;
            width: 33.33%;
            padding: 10px;
        }

        /* Clearfix (clear floats) */
        .row::after {
            content: "";
            clear: both;
            width: 30%;
            display: table;
        }
        .row{
            margin-top: 40px;
        }
        #banka{
            background: rgba(0, 0, 0, 0.04);
            border-radius: 20%;
            height: 130px;
            width: 100px;
            box-shadow: 0 0 15px rgba(0,0,0,.5);
        }
        #kafe {
            background: rgba(0, 0, 0, 0.04);
            border-radius: 20%;
            height: 130px;
            width: 100px;
            box-shadow: 0 0 15px rgba(0,0,0,.5);
        }
        #bolnica {
            background: rgba(0, 0, 0, 0.04);
            border-radius: 20%;
            height: 130px;
            width: 100px;
            box-shadow: 0 0 15px rgba(0,0,0,.5);
        }
        #office {
            background: rgba(0, 0, 0, 0.04);
            border-radius: 20%;
            height: 130px;
            width: 100px;
            box-shadow: 0 0 15px rgba(0,0,0,.5);
        }
        #gmap_canvas{
            border-radius: 9%;
        }
        .search-box{
            /*nav-left: initial;*/
            top: 50%;
            left: 50%;
            height: 25px;
            border-radius: 40px;
            background: rgba(197, 186, 172, 0.25);
            padding: 5px;
            box-shadow: 0 0 20px rgba(0,0,0,.5);
            width: 230px;
        }
        .search-btn{
            color: rgba(87, 87, 87, 0.62);
            float: left;
            width: 40px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .search-txt{
            border: none;
            background: none;
            outline: none;
            float: bottom;
            padding: 0;
            color:rgba(87, 87, 87, 0.62);
            /*color: rgba(128, 128, 128, 0.62);*/
            font-size: 16px;
            transition: 0.4s;
            line-height: 25px;
            width: 0px;
        }
        .search-box:hover > .search-txt{
            width: 160px;
            border-radius: 30%;
        }

        .tooltip .tooltiptext {
          visibility: hidden;
          width: 120px;
          background-color: rgba(87, 87, 87, 0.62);
          color: #fff;
          text-align: center;
          border-radius: 6px;
          padding: 5px 0;

          position: absolute;
          z-index: 1;
        }

        .tooltip:hover .tooltiptext {
          visibility: visible;
        }

        #mapid {
            width: 700px;
            height: 1000px;
            border-radius: 50px;
        }

        /* The css code for zoom buttons on the map */
        .leaflet-control-zoom-in {
            font: bold 18px 'Lucida Console', Monaco, monospace;
            text-indent: 1px;
            
        }

        .leaflet-control-zoom-out {
            font: bold 18px 'Lucida Console', Monaco, monospace;
            text-indent: 1px;
           
        }
    </style>


</head>
<body>
    <script>
        //Globalna promenliva
        var map;
        window.onload=function(){
    
            map = dispalyMap();
    
            var input = document.getElementById("vlez");
            input.addEventListener("keyup", function(event) {
            
            if (event.keyCode === 13) {
                event.preventDefault();
                document.getElementById("search").click();
            }
            });

            map.on('locationfound',onLocationFound);
            map.on('locationerror',onLocationError);
        };

        function dispalyMap(){
            var mymap = L.map('mapid').setView([40.7128, 74.0060], 10);

            L.tileLayer('https://api.maptiler.com/maps/basic/{z}/{x}/{y}.png?key=6F9yLFKNMLDBrR4LD4Pt', {
            attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'
            }).addTo(mymap);

            return mymap;
        }

        function onLocationFound(e){
            var LeafIcon = L.Icon.extend({
            options: {
             iconSize:[30, 30],
                }
            });
            var greenIcon = new LeafIcon({
                iconUrl: '../static/redMarker2.png',
            });
            L.marker([e.latitude, e.longitude],{icon:greenIcon}).addTo(map);
        }
        
        function onLocationError(e){
            alert(e.message);
        }

        function findMyLocation(){
           var location =  map.locate({setView : true});
        }
        
    </script>

<section>
    <header><a href="{{ url_for('index') }}" style="text-decoration: none"><h1>Find your way</h1></a></header>
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <form action="{{ url_for('search',category=0) }}" method="POST">
        <div class="search-box">
            <input id = "vlez" class="search-txt" type="text" name="ime" placeholder="Type to search">
            <button id = "search" class="search-btn" type="submit" style="border:none;">
                <i class="fas fa-search"></i>
            </button>
         </div>
    </form>
    <!--<input id ="vlez" placeholder="Search...">
    <button id ="search" onclick="ClearField()">SEARCH</button>-->
    <div class="row">
        <div class="column">
            <a href= "{{ url_for('banks') }}" class="tooltip">
                <img src="/static/bank.png" id="banka" alt="banka" >
                    <span class="tooltiptext">Banks</span>
            </a>
        </div>
        <div class="column">
            <a href= "{{ url_for('coffees') }}" class="tooltip">
                <img src="/static/cafe.png" id="kafe" alt="cafe">
                <span class="tooltiptext">Cafes</span>
            </a>
        </div><br>

        <div class="column">
            <a href= "{{ url_for('hospitals') }}" class="tooltip">
                <img src="/static/hospital.png" id="bolnica" alt="hospital">
                <span class="tooltiptext">Hospitals</span>
            </a>
        </div>
        <div class="column">
            <a href= "{{ url_for('offices') }}" class="tooltip">
                <img src="/static/office.png" id="office" alt="office">
                <span class="tooltiptext">Offices</span>
            </a>
        </div>
    </div>

    <input type="button" value="Find My Location" onclick="findMyLocation()">
    </div><br>
</section>

<aside>
    <div id="mapid"></div>
    <!-- <div class="mapouter">
        <div class="gmap_canvas">
            <iframe width="1000" height="1000" id="gmap_canvas" src="https://maps.google.com/maps?q=university%20of%20san%20francisco&t=&z=13&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
            <a href="https://sites.google.com/view/maps-api-v2/mapv2"></a>
        </div>
        <style>
            .mapouter{
                position:relative;
                text-align:left;
                min-height:1000px;
                width:600px;
            }
            .gmap_canvas {
                overflow:hidden;
                background:none!important;
                min-height:1000px;
                width:600px;
            }</style>
    </div> -->
</aside>

</body>

</html>